(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bd9caae","chunk-680ee37a","chunk-46574d2a"],{"0bab":function(t,e,i){},"17c6":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("sticky",{attrs:{"z-index":1,"sticky-top":84,"class-name":"sub-navbar"}},[i("el-button",{attrs:{size:"mini"},on:{click:t.toBack}},[t._v("返回")]),t._v(" "),i("el-button",{staticClass:"title",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.submitForm("addOrEditForm")}}},[t._v("保存")])],1),t._v(" "),i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card card-my",attrs:{shadow:"never"}},[i("div",{staticClass:"task-main"},[i("el-form",{ref:"addOrEditForm",attrs:{"label-width":"90px",model:t.addOrEditForm,size:"mini",rules:t.rules}},[i("el-row",[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{label:"任务组名",prop:"jobGroup"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{"auto-complete":"off",placeholder:"请输入任务组名"},model:{value:t.addOrEditForm.jobGroup,callback:function(e){t.$set(t.addOrEditForm,"jobGroup",e)},expression:"addOrEditForm.jobGroup"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"默认环境",prop:"jobParams.envId"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",placeholder:"请选择默认环境"},model:{value:t.addOrEditForm.jobParams.envId,callback:function(e){t.$set(t.addOrEditForm.jobParams,"envId",e)},expression:"addOrEditForm.jobParams.envId"}},[i("el-option",{attrs:{label:"默认环境",value:-1}}),t._v(" "),t._l(t.apiEnvList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{staticStyle:{width:"70%"},model:{value:t.addOrEditForm.remark,callback:function(e){t.$set(t.addOrEditForm,"remark",e)},expression:"addOrEditForm.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"cron表达式",prop:"cronExpression"}},[i("el-popover",{attrs:{placement:"right"},model:{value:t.cronPopover,callback:function(e){t.cronPopover=e},expression:"cronPopover"}},[i("vueCron",{on:{change:t.changeCron,close:function(e){t.cronPopover=!1}}}),t._v(" "),i("el-input",{staticStyle:{width:"70%"},attrs:{slot:"reference",placeholder:"请输入定时策略"},on:{click:function(e){t.cronPopover=!0}},slot:"reference",model:{value:t.addOrEditForm.cronExpression,callback:function(e){t.$set(t.addOrEditForm,"cronExpression",e)},expression:"addOrEditForm.cronExpression"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"执行错误策略",prop:"misfirePolicy"}},[i("el-radio-group",{model:{value:t.addOrEditForm.misfirePolicy,callback:function(e){t.$set(t.addOrEditForm,"misfirePolicy",e)},expression:"addOrEditForm.misfirePolicy"}},[i("el-radio",{attrs:{label:"0"}},[t._v("默认")]),t._v(" "),i("el-radio",{attrs:{label:"1"}},[t._v("立即执行")]),t._v(" "),i("el-radio",{attrs:{label:"2"}},[t._v("执行一次")]),t._v(" "),i("el-radio",{attrs:{label:"3"}},[t._v("放弃执行")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.addOrEditForm.status,callback:function(e){t.$set(t.addOrEditForm,"status",e)},expression:"addOrEditForm.status"}},[i("el-radio",{attrs:{label:"0"}},[t._v("正常")]),t._v(" "),i("el-radio",{attrs:{label:"1"}},[t._v("暂停")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"是否发送邮件",prop:"isSendEmail"}},[i("el-radio-group",{model:{value:t.addOrEditForm.jobParams.isSendEmail,callback:function(e){t.$set(t.addOrEditForm.jobParams,"isSendEmail",e)},expression:"addOrEditForm.jobParams.isSendEmail"}},[i("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),t._v(" "),1===t.addOrEditForm.jobParams.isSendEmail?i("el-form-item",{attrs:{label:"收件人",prop:"receivers"}},[i("el-input",{attrs:{type:"textarea",placeholder:"如果有多个邮箱地址用“;”号隔开"},model:{value:t.addOrEditForm.jobParams.receivers,callback:function(e){t.$set(t.addOrEditForm.jobParams,"receivers",e)},expression:"addOrEditForm.jobParams.receivers"}})],1):t._e()],1),t._v(" "),i("el-col",{attrs:{span:14}},[i("add-or-edit-case",{model:{value:t.addOrEditForm.apiSuiteList,callback:function(e){t.$set(t.addOrEditForm,"apiSuiteList",e)},expression:"addOrEditForm.apiSuiteList"}})],1)],1)],1)],1)])],1)},a=[],n=i("7654"),o=i("3fa5"),s=i("b804"),d=i("f0fa"),c=i("18c9"),l={components:{Sticky:s["a"],addOrEditCase:d["default"]},data:function(){var t=this,e=function(e,i,r){Object(n["c"])(t.addOrEditForm).then((function(t){t?r():r(new Error("Cron表达式错误"))}))};return{cronPopover:!1,apiEnvList:[],loading:!1,rules:{jobGroup:[{required:!0,message:"任务组名不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"cron表达式不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],"jobParams.envId":[{required:!0,message:"请选择默认环境",trigger:"blur"}]},addOrEditForm:{title:"",jobId:"",jobName:"",jobGroup:"",methodName:"",methodParams:"",cronExpression:"",projectId:"",jobType:4,businessList:[],apiSuiteList:[],misfirePolicy:"0",status:"0",remark:"",jobParams:{browserType:"IE",clientId:"",envId:-1,isSendEmail:0,receivers:""}}}},mounted:function(){var t=this;Object(c["d"])(this.$store.getters.projectId).then((function(e){t.apiEnvList=e||[]})),this.beforeInit()},methods:{beforeInit:function(){var t=this;this.$route.query.jobId?(this.loading=!0,Object(n["f"])(this.$route.query.jobId).then((function(e){e.projectId!==t.$store.getters.projectId&&t.toBack(),t.init(e),t.loading=!1}))):this.init()},changeCron:function(t){this.addOrEditForm.cronExpression=t},init:function(t){if(t){try{this.addOrEditForm.jobParams=JSON.parse(t.methodParams)}catch(e){this.addOrEditForm.jobParams={}}this.addOrEditForm.title="编辑任务",this.addOrEditForm.jobId=t.jobId,this.addOrEditForm.jobName=t.jobName,this.addOrEditForm.jobGroup=t.jobGroup,this.addOrEditForm.methodName=t.methodName,this.addOrEditForm.methodParams=t.methodParams,this.addOrEditForm.cronExpression=t.cronExpression,this.addOrEditForm.projectId=t.projectId,this.addOrEditForm.businessList=t.businessList,this.addOrEditForm.apiSuiteList=t.apiSuiteList,this.addOrEditForm.jobType=3,this.addOrEditForm.misfirePolicy=t.misfirePolicy,this.addOrEditForm.status=t.status,this.addOrEditForm.remark=t.remark}else this.addOrEditForm.title="新增任务",this.addOrEditForm.jobName="autoTestNewTask",this.addOrEditForm.methodName="apiTest",this.addOrEditForm.jobType=3,this.addOrEditForm.projectId=this.$store.getters.projectId},closeDialog:function(){this.$refs["addOrEditForm"].resetFields(),this.resetDialog()},toBack:function(){this.closeDialog(),this.$router.push({path:"/apiTest/testPlan/list"})},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){e.addOrEditForm.methodParams=JSON.stringify(e.addOrEditForm.jobParams),t&&e.addOrEditForm.jobId?(e.loading=!0,Object(n["i"])(e.addOrEditForm).then((function(t){e.beforeInit(),Object(o["a"])("保存数据成功")}))):t&&!e.addOrEditForm.jobId&&(e.loading=!0,Object(n["a"])(e.addOrEditForm).then((function(t){e.toBack(),Object(o["a"])("保存数据成功")})))}))},resetDialog:function(){this.addOrEditForm={title:"",jobId:"",jobName:"",jobGroup:"",methodName:"",methodParams:"",cronExpression:"",projectId:"",jobType:3,misfirePolicy:"0",status:"0",remark:"",jobParams:{clientId:"",envId:-1,browserType:"",isSendEmail:0,receivers:"IE"}}}}},u=l,m=(i("c3b2"),i("5511")),f=Object(m["a"])(u,r,a,!1,null,"4eaefd9f",null);e["default"]=f.exports},"18c9":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"e",(function(){return s})),i.d(e,"b",(function(){return d}));var r=i("b775"),a=function(t){return Object(r["d"])("/env/listPage",t,!1)},n=function(t){return Object(r["d"])("/env/listByProjectId/"+t)},o=function(t){return Object(r["e"])("/env/add",t)},s=function(t){return Object(r["f"])("/env/edit",t)},d=function(t){return Object(r["e"])("/env/remove",t)}},"2a4f":function(t,e,i){"use strict";var r=i("0bab"),a=i.n(r);a.a},"2d9f":function(t,e,i){},"648b":function(t,e,i){},7654:function(t,e,i){"use strict";i.d(e,"h",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"g",(function(){return o})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return d})),i.d(e,"i",(function(){return c})),i.d(e,"e",(function(){return l})),i.d(e,"c",(function(){return u})),i.d(e,"f",(function(){return m}));var r=i("b775"),a=function(t){return Object(r["d"])("/job/list",t,!1)},n=function(t){return Object(r["d"])("/job/listByCustomer",t,!1)},o=function(t){return Object(r["e"])("/job/run",t)},s=function(t){return Object(r["e"])("/job/add",t)},d=function(t){return Object(r["e"])("/job/changeStatus",t)},c=function(t){return Object(r["f"])("/job/edit",t)},l=function(t){return Object(r["e"])("/job/remove",t)},u=function(t){return Object(r["e"])("/job/checkCronExpressionIsValid",t)},m=function(t){return Object(r["d"])("/job/detail/"+t)}},8140:function(t,e,i){"use strict";var r=i("2d9f"),a=i.n(r);a.a},ae39:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"close-on-click-modal":!1,title:"添加用例集",visible:t.visible,width:"700px"},on:{"update:visible":function(e){t.visible=e},close:function(e){return t.closeDialog()}}},[i("el-card",{staticClass:"box-card card-my",attrs:{shadow:"never"}},[i("div",{staticClass:"my-class"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.serchData,"label-width":"90px","label-position":"right",size:"mini"}},[i("el-form-item",{attrs:{label:"业务流名称："}},[i("el-input",{attrs:{placeholder:"请输入业务流名称"},model:{value:t.serchData.name,callback:function(e){t.$set(t.serchData,"name",e)},expression:"serchData.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{on:{click:t.searchList}},[t._v("查询")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addRow()}}},[t._v("添加")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"refTable",staticStyle:{width:"auto"},attrs:{data:t.dataList,border:"",stripe:"",size:"small"},on:{"selection-change":t.selected}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",width:"60px",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"业务流名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])})],1),t._v(" "),i("el-pagination",{attrs:{background:"","current-page":t.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.pageCount},on:{"size-change":t.changePageSize,"current-change":t.changePageNum}})],1)],1)},a=[],n=(i("6d57"),i("fe77")),o={props:["value"],data:function(){return{visible:!1,dataList:[],selectedData:[],serchData:{name:"",remark:""},pageInfo:{pageNum:1,pageSize:10,pageCount:0},loading:!1}},computed:{serchInfo:function(){var t=this.pageInfo,e=this.serchData;return e.projectId=this.$store.getters.projectId,e.type=2,t.serchData=e,t}},watch:{value:{handler:function(t){this.visible=t},immediate:!0},visible:function(t){this.$emit("input",t)}},mounted:function(){this.getPageList()},methods:{selected:function(t){this.selectedData=t},addRow:function(){this.selectedData.forEach((function(t){t.isValid=1})),this.$emit("backDate",this.selectedData),this.visible=!1},getPageList:function(){var t=this;this.loading=!0,Object(n["f"])(this.serchInfo).then((function(e){t.dataList=e.list||[],t.pageInfo.pageCount=e.total,t.loading=!1}))},searchList:function(){this.getPageList()},changePageSize:function(t){this.pageInfo.pageSize=t,this.getPageList()},changePageNum:function(t){this.pageInfo.pageNum=t,this.getPageList()},closeDialog:function(){this.$refs.refTable.clearSelection(),this.selectedData=[]}}},s=o,d=(i("8140"),i("5511")),c=Object(d["a"])(s,r,a,!1,null,"569ac27a",null);e["default"]=c.exports},b804:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[i("div",{class:t.className,style:{top:t.isSticky?t.stickyTop+"px":"",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[i("div",[t._v("sticky")])])],2)])},a=[],n=(i("163d"),{name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||"auto";var e=this.$el.getBoundingClientRect().top;e<this.stickyTop?this.sticky():this.handleReset()},handleResize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}}),o=n,s=i("5511"),d=Object(s["a"])(o,r,a,!1,null,null,null);e["a"]=d.exports},c3b2:function(t,e,i){"use strict";var r=i("648b"),a=i.n(r);a.a},f0fa:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-row",{staticClass:"header"},[i("b",{staticClass:"title"},[t._v("用例集列表")]),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){return t.addRow()}}},[t._v("新增用例集")])],1),t._v(" "),i("el-table",{ref:"dragTable",staticStyle:{width:"auto"},attrs:{data:t.dataList,border:"",stripe:"",size:"small"}},[i("el-table-column",{attrs:{align:"center",width:"60px",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"用例集名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.suiteName))]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",width:"150px",label:"用例状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1===e.row.isValid?"启用":"")+"\n        "+t._s(0===e.row.isValid?"禁用":"")+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",width:"130",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.isValid?i("el-button",{staticClass:"mini-btn",attrs:{size:"mini"},on:{click:function(t){e.row.isValid=1}}},[t._v("启用")]):t._e(),t._v(" "),1===e.row.isValid?i("el-button",{staticClass:"mini-btn",attrs:{size:"mini"},on:{click:function(t){e.row.isValid=0}}},[t._v("禁用")]):t._e(),t._v(" "),i("el-button",{staticClass:"mini-btn",attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleteRow(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("business-add",{ref:"addOrUpdate",on:{backDate:t.addBusiness},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}})],1)},a=[],n=(i("cc57"),i("6d57"),i("ae39")),o={components:{businessAdd:n["default"]},props:["value"],data:function(){return{dataList:[],visible:!1,maxSortTemp:0}},watch:{value:{handler:function(t){this.dataList=t||[]},immediate:!0},dataList:function(t){this.$emit("input",t)}},mounted:function(){},methods:{deleteRow:function(t){this.dataList.splice(t,1)},addRow:function(){this.visible=!0},addBusiness:function(t){var e=this;t&&t.forEach((function(t){var i={};i.suiteName=t.name,i.suiteId=t.id,i.isValid=1,e.dataList.push(i)}))}}},s=o,d=(i("2a4f"),i("5511")),c=Object(d["a"])(s,r,a,!1,null,"249e7c99",null);e["default"]=c.exports},fe77:function(t,e,i){"use strict";i.d(e,"f",(function(){return a})),i.d(e,"b",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"h",(function(){return s})),i.d(e,"e",(function(){return d})),i.d(e,"g",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return u}));var r=i("b775"),a=function(t){return Object(r["d"])("/testsuiteApi/listPage",t,!1)},n=function(t){return Object(r["e"])("/testsuiteApi/add",t)},o=function(t){return Object(r["e"])("/testsuiteApi/remove",t)},s=function(t){return Object(r["f"])("/testsuiteApi/edit",t)},d=function(t){return Object(r["d"])("/testsuiteApi/listCaseById/"+t)},c=function(t){return Object(r["e"])("/testsuiteApi/updateCaseSort",t)},l=function(t){return Object(r["e"])("/testsuiteApi/addCaseToSuite",t)},u=function(t){return Object(r["e"])("/testsuiteApi/delSuiteCaseById/"+t)}}}]);