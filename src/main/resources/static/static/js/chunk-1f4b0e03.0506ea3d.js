(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f4b0e03"],{c0eb:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"j",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return m});var a=n("b775"),i=function(e){return Object(a["d"])("/jmeterScript/listPage",e,!1)},r=function(e){return Object(a["d"])("/jmeterScript/listById/"+e)},o=function(e){return Object(a["e"])("/jmeterScript/add",e)},s=function(e){return Object(a["f"])("/jmeterScript/edit",e)},l=function(e){return Object(a["e"])("/jmeterScript/remove",e)},c=function(e){return Object(a["d"])("/jmeterScript/removeCsv",e)},u=function(e){return Object(a["g"])("/jmeterScript/uploadScripts",e)},d=function(e){return Object(a["g"])("/jmeterScript/uploadCsv",e)},p=function(e){return Object(a["g"])("/jmeterScript/coverCsv",e)},m=function(e){return Object(a["c"])("/jmeterScript/downloadCsv",e)}},ca1c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card card-main",attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.serchData,"label-width":"90px","label-position":"right",size:"mini"}},[n("el-form-item",{attrs:{label:"脚本名称："}},[n("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入脚本名称"},model:{value:e.serchData.name,callback:function(t){e.$set(e.serchData,"name",t)},expression:"serchData.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"调试状态："}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择脚本状态"},model:{value:e.serchData.debugStatus,callback:function(t){e.$set(e.serchData,"debugStatus",t)},expression:"serchData.debugStatus"}},[n("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),n("el-option",{attrs:{label:"初始状态",value:0}}),e._v(" "),n("el-option",{attrs:{label:"调试中",value:1}}),e._v(" "),n("el-option",{attrs:{label:"成功",value:2}}),e._v(" "),n("el-option",{attrs:{label:"失败",value:3}})],1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),n("el-button",{on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),e._v(" "),n("el-row",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addRow()}}},[e._v("新增脚本")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("脚本导入")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadJmeterTemplate()}}},[e._v("脚本模板下载")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"auto"},attrs:{data:e.dataList,border:"",stripe:"",size:"small"}},[n("el-table-column",{attrs:{width:"250",align:"center",label:"脚本名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"200",align:"center",label:"调试开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.debugStartTime))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"200",align:"center",label:"调试结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.debugEndTime))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"130",align:"center",label:"调试状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{size:"mini"}},[e._v("\n          "+e._s(0===t.row.debugStatus?"初始状态":"")+"\n          "+e._s(1===t.row.debugStatus?"调试中":"")+"\n          "+e._s(2===t.row.debugStatus?"成功":"")+"\n          "+e._s(3===t.row.debugStatus?"失败":""))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"220",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"1px"},attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.debug(t.row.id)}}},[e._v("调试")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"1px"},attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.addRow(t.row)}}},[e._v("结果")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"1px"},attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.addRow(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"1px"},attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.deleteRow(t.row)}}},[e._v("删除")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"1px"},attrs:{size:"mini"},on:{click:function(n){return e.downloadJmeterScript(t.row)}}},[e._v("下载")])]}}])})],1),e._v(" "),n("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.pageCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNum}}),e._v(" "),n("el-dialog",{attrs:{title:"脚本导入","close-on-click-modal":!1,visible:e.dialogVisible,width:"410px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],ref:"upload",attrs:{"show-file-list":!1,drag:"","http-request":e.fileUpload,action:"#",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip",center:""},slot:"tip"},[e._v("只能上传zip文件，且不超过10M")])])],1),e._v(" "),n("el-dialog",{attrs:{title:"调试脚本","close-on-click-modal":!1,visible:e.debugDialog,width:"500px"},on:{"update:visible":function(t){e.debugDialog=t}}},[n("el-form",{ref:"debugForm",attrs:{"label-width":"90px",model:e.debugForm,size:"small",rules:e.rules}},[n("el-form-item",{attrs:{label:"页面名称",prop:"pageName"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入页面名称"},model:{value:e.debugForm.pageName,callback:function(t){e.$set(e.debugForm,"pageName",t)},expression:"debugForm.pageName"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("addOrEditForm")}}},[e._v("取消")]),e._v(" "),n("el-button",{staticClass:"title",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addOrEditForm")}}},[e._v("保存")])],1)],1)],1)},i=[],r=(n("63ff"),n("e71e")),o=(n("7364"),n("c0eb")),s={data:function(){return{debugForm:{},dialogVisible:!1,debugDialog:!1,uploadLoading:!1,loading:!1,serchData:{name:"",debugStatus:""},pageInfo:{pageNum:1,pageSize:10,pageCount:0},dataList:[],addOrEditFormVisible:!1}},computed:{serchInfo:function(){var e=this.pageInfo,t=this.serchData;return t.projectId=this.$store.getters.projectId,e.serchData=t,e}},mounted:function(){this.getPageList()},methods:{debug:function(e){this.debugDialog=!0},resetSearch:function(){this.serchData={name:"",debugStatus:""}},searchList:function(){this.getPageList()},changePageSize:function(e){this.pageInfo.pageSize=e,this.getPageList()},changePageNum:function(e){this.pageInfo.pageNum=e,this.getPageList()},addRow:function(e){e?this.$router.push({path:"/jmeter/script/edit",query:{id:e.id}}):this.$router.push({path:"/jmeter/script/new"})},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该脚本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o["c"])(e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getPageList()})}).catch(function(){t.$message({type:"success",message:"已取消删除"})})},getPageList:function(){var e=this;this.loading=!0,Object(o["d"])(this.serchInfo).then(function(t){e.dataList=t.list||[],e.pageInfo.pageCount=t.total,e.loading=!1})},fileUpload:function(e){var t=this,n=e.file,a=n.size<10485760,i=n.name.lastIndexOf("."),s=n.name.substr(i+1);if("zip"!==s.toLowerCase())return this.$message.warning("只能上传zip文件"),!1;if(!a)return this.$message.warning("请上传10M以下的zip文件"),!1;var l=new FormData;l.append("files",n),l.append("isCover",!1),this.uploadLoading=!0,Object(o["i"])(l).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("存在同名jmx脚本"!==n){e.next=5;break}return e.next=3,t.$confirm("该jmx脚本名称已存在, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.set("isCover",!0),Object(o["i"])(l).then(function(e){t.$message({type:"success",message:"上传成功!"}),t.getPageList()})}).catch(function(){});case 3:e.next=7;break;case 5:t.$message({type:"success",message:"上传成功!"}),t.getPageList();case 7:t.dialogVisible=!1,t.$refs["upload"].clearFiles();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).finally(function(){t.uploadLoading=!1})},downloadJmeterTemplate:function(){var e=document.createElement("a");e.style.display="none",e.href="/public/profile/jmeter/template/jmeterTemplate.zip",e.download="",document.body.appendChild(e),e.click(),document.body.removeChild(e)},downloadJmeterScript:function(e){var t=document.createElement("a");t.style.display="none",t.href="/public/profile/jmeter/"+e.projectId+"/"+e.scriptPath,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},l=s,c=n("6691"),u=Object(c["a"])(l,a,i,!1,null,"c1e0e542",null);t["default"]=u.exports}}]);