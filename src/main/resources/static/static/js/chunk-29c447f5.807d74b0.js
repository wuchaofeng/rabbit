(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29c447f5","chunk-905bbbd8"],{"05ed":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return m}));var a=n("b775"),i=function(e){return Object(a["d"])("/dict/listDict")},r=function(e){return Object(a["d"])("/dict/uiActionList")},o=function(e){return Object(a["d"])("/dict/apiActionList")},c=function(e){return Object(a["e"])("/dict/addDict",e)},l=function(e){return Object(a["f"])("/dict/editDict",e)},s=function(e){return Object(a["d"])("/dict/listDictValue/"+e)},u=function(e){return Object(a["e"])("/dict/addDictValue",e)},d=function(e){return Object(a["f"])("/dict/editDictValue",e)},f=function(e){return Object(a["e"])("/dict/removeDictValue/"+e)},p=function(e){return Object(a["d"])("/dict/dictValue/listPage",e)},m=function(e){return Object(a["e"])("/dict/getDictValueById/"+e)}},"120e":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));var a=n("b775"),i=function(e){return Object(a["d"])("/pageElement/listPage",e,!1)},r=function(e){return Object(a["e"])("/pageElement/add",e)},o=function(e){return Object(a["f"])("/pageElement/edit",e)},c=function(e){return Object(a["e"])("/pageElement/remove",e)},l=function(e){return Object(a["d"])("/pageElement/listByProjectId/"+e)}},"52c11":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card card-main",attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-row",[n("el-button",{attrs:{size:"mini"},on:{click:e.toBack}},[e._v("返回")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.addRow()}}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.save("formDom")}}},[e._v("保存")])],1)],1),e._v(" "),n("el-form",{ref:"formDom",attrs:{rules:e.formData.rules,model:e.formData,size:"small"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"auto"},attrs:{data:e.formData.tableData,border:"",stripe:"",size:"small"}},[n("el-table-column",{attrs:{width:"220",prop:"name",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{prop:"tableData."+t.$index+".name",rules:e.formData.rules.name}},[n("el-input",{attrs:{placeholder:"描述"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"190",prop:"actionTemp",label:"动作Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{prop:"tableData."+t.$index+".actionTemp",rules:e.formData.rules.actionTemp}},[n("el-cascader",{staticStyle:{width:"150px"},attrs:{placeholder:"试试搜索：关键字",options:e.uiActionList,"show-all-levels":!1,filterable:"","popper-class":"ui-action-popper-class",props:{expandTrigger:"hover"}},on:{change:function(n){return e.changeAction(t.row,t.row.actionTemp)}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return[n("span",[e._v(e._s(i.label))]),e._v(" "),a.isLeaf?n("span",[e._v(" ("+e._s(i.name)+") ")]):e._e(),e._v(" "),a.isLeaf?e._e():n("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}],null,!0),model:{value:t.row.actionTemp,callback:function(n){e.$set(t.row,"actionTemp",n)},expression:"scope.row.actionTemp"}}),e._v(" "),n("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"}},[n("pre",[e._v(e._s(t.row.actionRemark))]),e._v(" "),n("svg-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference","icon-class":"tips"},slot:"reference"})],1)],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"path",width:"260px",label:"页面元素"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{prop:"tableData."+t.$index+".pageElementTemp",rules:e.formData.rules.pageElementTemp}},[n("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"试试搜索：元素",options:e.projectPageList,"popper-class":"ui-action-popper-class",filterable:"",clearable:"",props:{expandTrigger:"hover"}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return[n("span",[e._v(e._s(i.label))]),e._v(" "),a.isLeaf?e._e():n("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}],null,!0),model:{value:t.row.pageElementTemp,callback:function(n){e.$set(t.row,"pageElementTemp",n)},expression:"scope.row.pageElementTemp"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"optionData",label:"操作数据/结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{prop:"tableData."+t.$index+".optionData",rules:e.formData.rules.optionData}},[n("el-input",{attrs:{placeholder:"操作数据/结果"},model:{value:t.row.optionData,callback:function(n){e.$set(t.row,"optionData",n)},expression:"scope.row.optionData"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"170",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(n){return e.addRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(n){return e.deleteRow(t.row,t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-top",size:"mini",circle:""},on:{click:function(n){return e.upGo(t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-bottom",size:"mini",circle:""},on:{click:function(n){return e.downGo(t.$index)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-document-copy",size:"mini",circle:""},on:{click:function(n){return e.copyRow(t.row,t.$index)}}})],1)],1)]}}])})],1)],1),e._v(" "),n("element-add-or-update",{ref:"elementAddOrUpdate"})],1)},i=[],r=(n("cc57"),n("6d57"),n("b775")),o=function(e){return Object(r["d"])("/uiStep/list/"+e)},c=function(e){return Object(r["e"])("/uiStep/add",e)},l=n("05ed"),s=n("3fa5"),u=n("c58d"),d=n("6380"),f=n("af96"),p={components:{ElementAddOrUpdate:u["default"]},data:function(){return{loading:!1,formData:{rules:{name:{type:"string",required:!0,message:"必填字段",trigger:"blur"},actionTemp:{required:!0,message:"必填字段",trigger:"blur"}},tableData:[{name:"",testcaseId:this.$route.query.id,actionTemp:"",pageElementTemp:"",optionData:"",type:1}]},dictValueList:[],uiActionList:[],projectPageList:[],caseInfo:{title:"",id:"",name:"",projectId:-1,remark:""}}},mounted:function(){var e=this;Object(d["d"])(this.$route.query.id).then((function(t){e.init(t),Object(f["e"])(t.projectId).then((function(t){t.forEach((function(t){var n=t.pageName,a=t.id,i=[];t.pageElementList&&t.pageElementList.forEach((function(e){var t=e.elementName,n=e.id;i.push({label:t,value:n})})),e.projectPageList.push({label:n,value:a,children:i})}))}))})),this.getListByCaseId(),this.getDictValueList(),this.getUiActionList()},methods:{init:function(e){this.caseInfo.title="编辑用例",this.caseInfo.id=e.id,this.caseInfo.name=e.name,this.caseInfo.projectId=e.projectId,this.caseInfo.remark=e.remark},toBack:function(){this.$router.push({path:"/uiTest/testCase/list"})},changeAction:function(e,t){for(var n=this.uiActionList,a=0;a<n.length;a++)if(0!==n[a].children.length&&n[a].value===t[0])for(var i=0;i<n[a].children.length;i++)if(n[a].children[i].value===t[1]){e.actionRemark=n[a].children[i].remark;break}},copyRow:function(e,t){this.formData.tableData.splice(t+1,0,e)},addRow:function(e,t){var n={name:"",testcaseId:this.$route.query.id,actionTemp:"",pageElementTemp:"",optionData:"",type:1};t||0===t?this.formData.tableData.splice(t+1,0,n):this.formData.tableData.push(n)},deleteRow:function(e,t){this.formData.tableData.splice(t,1)},upGo:function(e){if(0!==e){var t=this.formData.tableData[e],n=this.formData.tableData[e-1];this.formData.tableData.splice(e,1,n),this.formData.tableData[e-1]=t}},downGo:function(e){if(e!==this.formData.tableData.length-1){var t=this.formData.tableData[e],n=this.formData.tableData[e+1];this.formData.tableData.splice(e,1,n),this.formData.tableData[e+1]=t}},save:function(e){var t=this;this.$refs[e].validate((function(e,n){e&&t.$confirm("是否确认保存测试步骤?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.formData.tableData=t.formData.tableData.map((function(e){return e.pageElementTemp&&(e.pageId=e.pageElementTemp[0],e.elementId=e.pageElementTemp[1]),e.actionTemp&&(e.actionType=e.actionTemp[0],e.action=e.actionTemp[1]),e})),c(t.formData.tableData).then((function(e){t.getListByCaseId(),Object(s["a"])("保存测试步骤成功")}))})).catch((function(){t.$message({type:"success",message:"已取消保存"})}))}))},getListByCaseId:function(){var e=this;this.loading=!0,o(this.$route.query.id).then((function(t){e.$refs["formDom"].resetFields(),e.formData.tableData=t.map((function(e){return e.pageElementTemp=[e.pageId,e.elementId],e.actionTemp=[e.actionType,e.action],e})),e.loading=!1}))},getDictValueList:function(){var e=this;Object(l["g"])(5).then((function(t){e.dictValueList=t}))},getUiActionList:function(){var e=this;Object(l["i"])().then((function(t){t.forEach((function(t){var n=t.name,a=t.key,i=[];t.sysDictValueList&&t.sysDictValueList.forEach((function(e){var t=e.key,n=e.key,a=e.name,r=e.remark;i.push({label:t,value:n,name:a,remark:r})})),e.uiActionList.push({label:n,value:a,children:i})}))}))}}},m=p,h=(n("7caa"),n("5511")),b=Object(h["a"])(m,a,i,!1,null,"21f823e2",null);t["default"]=b.exports},6380:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n("b775"),i=function(e){return Object(a["d"])("/uiTestCase/listPage",e,!1)},r=function(e){return Object(a["d"])("/uiTestCase/"+e)},o=function(e){return Object(a["d"])("/uiTestCase/listByBusinessId",e,!1)},c=function(e){return Object(a["e"])("/uiTestCase/add",e)},l=function(e){return Object(a["f"])("/uiTestCase/edit",e)},s=function(e){return Object(a["e"])("/uiTestCase/remove",e)}},"65db":function(e,t,n){"use strict";var a=n("e349"),i=n.n(a);i.a},"7caa":function(e,t,n){"use strict";var a=n("fcfb"),i=n.n(a);i.a},af96:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return s}));var a=n("b775"),i=function(e){return Object(a["d"])("/projectPage/listPage",e,!1)},r=function(e){return Object(a["e"])("/projectPage/add",e)},o=function(e){return Object(a["f"])("/projectPage/edit",e)},c=function(e){return Object(a["e"])("/projectPage/remove",e)},l=function(e){return Object(a["d"])("/projectPage/listByProjectId/"+e)},s=function(e){return Object(a["d"])("/projectPage/listById/"+e)}},c58d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"选择页面元素",visible:e.visible,width:"80%"},on:{"update:visible":function(t){e.visible=t}}},[n("el-card",{staticClass:"box-card card-my",attrs:{shadow:"never"}},[n("div",{staticClass:"my-class"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.serchData,"label-width":"90px","label-position":"right",size:"mini"}},[n("el-form-item",{attrs:{label:"页面名称："}},[n("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入页面名称"},model:{value:e.serchData.pageName,callback:function(t){e.$set(e.serchData,"pageName",t)},expression:"serchData.pageName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"元素名称："}},[n("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入元素名称"},model:{value:e.serchData.elementName,callback:function(t){e.$set(e.serchData,"elementName",t)},expression:"serchData.elementName"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),n("el-button",{on:{click:e.clearElement}},[e._v("清除元素")])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"auto"},attrs:{data:e.dataList,border:"",stripe:"",size:"small"},on:{"row-dblclick":e.selectRow}},[n("el-table-column",{attrs:{width:"100",align:"center",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.projectName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"150",label:"页面名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.pageName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"150",label:"元素名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.elementName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",width:"100",label:"定位方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.byType))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"定位值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.value))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.remark))]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"180",label:"操作"}},[n("span",[e._v("双击选择元素")])])],1),e._v(" "),n("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.pageCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNum}})],1)],1)},i=[],r=n("120e"),o={data:function(){return{visible:!1,loading:!1,projects:[],serchData:{projectName:"",pageName:"",elementName:""},pageInfo:{pageNum:1,pageSize:10,pageCount:0},dataList:[],row:{}}},computed:{serchInfo:function(){var e=this.pageInfo,t=this.serchData;return e.serchData=t,e}},methods:{init:function(e,t){this.projects=this.$store.getters.projects,this.serchData.projectName=t,this.row=e,this.visible=!0,this.getPageList()},searchList:function(){this.getPageList()},changePageSize:function(e){this.pageInfo.pageSize=e,this.getPageList()},changePageNum:function(e){this.pageInfo.pageNum=e,this.getPageList()},selectRow:function(e,t,n){this.row.elementName=e.pageName+"->"+e.elementName,this.row.elementId=e.id,this.visible=!1},clearElement:function(){this.row.elementName="",this.row.elementId=-1,this.visible=!1},getPageList:function(){var e=this;this.loading=!0,Object(r["c"])(this.serchInfo).then((function(t){e.dataList=t.list||[],e.pageInfo.pageCount=t.total,e.loading=!1}))}}},c=o,l=(n("65db"),n("5511")),s=Object(l["a"])(c,a,i,!1,null,"199620b3",null);t["default"]=s.exports},e349:function(e,t,n){},fcfb:function(e,t,n){}}]);