(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-616d54bc"],{"1ce0":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.addOrEditForm.title,visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog()}}},[i("el-form",{ref:"addOrEditForm",attrs:{"label-width":"90px",model:e.addOrEditForm,size:"small",rules:e.roleRules}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.addOrEditForm.name,callback:function(t){e.$set(e.addOrEditForm,"name",t)},expression:"addOrEditForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色描述"},model:{value:e.addOrEditForm.description,callback:function(t){e.$set(e.addOrEditForm,"description",t)},expression:"addOrEditForm.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限配置"}},[i("el-tree",{ref:"listTree",attrs:{data:e.allPermissions,props:e.listTreeProps,"node-key":"id","show-checkbox":!0,"default-expand-all":!1,accordion:!1,"empty-text":"没有权限数据"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog()}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addOrEditForm")}}},[e._v("保存")])],1)],1)},s=[],o=(i("cc57"),i("cc5e")),n=i("c24f"),l=i("3fa5"),d={data:function(){return{visible:!1,allPermissions:[],listDataTemp:[],listTreeProps:{label:"name",children:"children"},addOrEditForm:{title:"",id:"",name:"",description:"",permissionIds:[]},roleRules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"},{pattern:/^[0-9A-Za-z]{3,10}$/,message:"角色名称由3-10位数或字字母组合",trigger:"blur"}],description:[{required:!0,message:"角色描述不能为空",trigger:"blur"}]}}},created:function(){var e=this;Object(n["f"])().then((function(t){e.allPermissions=t,e.listDataTemp=t}))},methods:{init:function(e){var t=this;this.allPermissions=this.listDataTemp,e?(this.addOrEditForm.title="编辑角色",this.addOrEditForm.id=e.id,this.addOrEditForm.name=e.name,this.addOrEditForm.description=e.description,Object(o["d"])({roleId:e.id}).then((function(e){e=e||[],t.$nextTick((function(){t.$refs.listTree.setCheckedKeys(e)}))})),this.visible=!0):(this.visible=!0,this.addOrEditForm.title="新增角色")},closeDialog:function(){this.visible=!1,this.$refs.listTree.setCheckedKeys([]),this.$refs["addOrEditForm"].resetFields(),this.allPermissions=[],this.addOrEditForm={title:"",id:"",name:"",description:"",permissionIds:[]}},submitForm:function(e){var t=this;this.$refs[e].validate((function(i){i&&"addOrEditForm"===e&&(t.addOrEditForm.permissionIds=t.$refs.listTree.getCheckedKeys().concat(t.$refs.listTree.getHalfCheckedKeys()),Object(o["e"])(t.addOrEditForm).then((function(i){t.visible=!1,t.$emit("refreshDataList"),t.$refs[e].resetFields(),Object(l["a"])("保存数据成功")})))}))}}},a=d,c=i("5511"),u=Object(c["a"])(a,r,s,!1,null,null,null);t["default"]=u.exports},cc5e:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return l})),i.d(t,"c",(function(){return d}));var r=i("b775"),s=function(e){return Object(r["d"])("/roles/all",e)},o=function(e){return Object(r["d"])("/roles/allByPage",e)},n=function(e){return Object(r["d"])("/permissions/childListID",e)},l=function(e){return Object(r["e"])("/roles",e)},d=function(e){return Object(r["b"])("/roles/"+e)}}}]);