(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63965a8a","chunk-1d134098","chunk-a4da514c","chunk-2d0db458"],{1183:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a("b775"),i=function(e){return Object(n["d"])("/flag/listPage",e,!1)},s=function(e,t){return Object(n["d"])("/flag/listByProjectIdAndType/"+e+"/"+t)},r=function(e){return Object(n["e"])("/flag/add",e)},o=function(e){return Object(n["f"])("/flag/edit",e)},l=function(e){return Object(n["e"])("/flag/remove",e)}},"190b":function(e,t,a){a("149f")&&"g"!=/./g.flags&&a("064e").f(RegExp.prototype,"flags",{configurable:!0,get:a("f1fe")})},"1a11":function(e,t,a){},"1c2e":function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"i",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"j",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"k",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return m}));var n=a("b775"),i=function(e){return Object(n["d"])("/api/listPage",e,!1)},s=function(e){return Object(n["d"])("/api/"+e)},r=function(e){return Object(n["d"])("/api/listTreeByProjectId/"+e)},o=function(e){return Object(n["d"])("/api/listSuiteByProjectId/"+e)},l=function(e){return Object(n["e"])("/api/debug",e)},c=function(e){return Object(n["e"])("/api/add",e)},u=function(e){return Object(n["f"])("/api/edit",e)},d=function(e){return Object(n["e"])("/api/addSuite",e)},f=function(e){return Object(n["f"])("/api/editSuite",e)},p=function(e){return Object(n["e"])("/api/remove",e)},m=function(e){return Object(n["e"])("/api/removeSuite",e)}},"244c":function(e,t,a){},"2fb8":function(e,t,a){},"569b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.addOrEditForm.title,visible:e.visible,"append-to-body":!0,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog("addOrEditForm")}}},[a("el-form",{ref:"addOrEditForm",attrs:{"label-width":"90px",model:e.addOrEditForm,size:"small",rules:e.rules}},[a("el-form-item",{attrs:{label:"标签名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入标签名称"},model:{value:e.addOrEditForm.name,callback:function(t){e.$set(e.addOrEditForm,"name",t)},expression:"addOrEditForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addOrEditForm.remark,callback:function(t){e.$set(e.addOrEditForm,"remark",t)},expression:"addOrEditForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("addOrEditForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addOrEditForm")}}},[e._v("保存")])],1)],1)},i=[],s=a("1183"),r=a("3fa5"),o={data:function(){return{visible:!1,rules:{name:[{required:!0,message:"标签名不能为空",trigger:"blur"}]},addOrEditForm:{title:"",id:"",name:"",projectId:"",type:1,remark:""}}},methods:{init:function(e){this.visible=!0,this.addOrEditForm.projectId=this.$store.getters.projectId,this.addOrEditForm.type=e,this.addOrEditForm.title="新增标签"},closeDialog:function(){this.$refs["addOrEditForm"].resetFields(),this.visible=!1,this.addOrEditForm={title:"",id:"",name:"",projectId:"",type:1,remark:""}},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(s["a"])(t.addOrEditForm).then((function(e){t.visible=!1,t.$emit("refreshDataList"),Object(r["a"])("保存数据成功")})).catch((function(){}))}))}}},l=o,c=a("5511"),u=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=u.exports},"59b5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{attrs:{size:"mini",clearable:"",filterable:"",multiple:"","popper-class":"flag-select-class",placeholder:"请选择标签"},model:{value:e.flags,callback:function(t){e.flags=t},expression:"flags"}},[e._l(e.flagList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})})),e._v(" "),a("span",[a("el-button",{staticStyle:{"margin-left":"5px","font-size":"14px"},attrs:{size:"small",type:"text",disabled:""}},[e._v("\n        没有你想要的标签\n      ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0px","font-size":"14px"},attrs:{size:"small",type:"text"},on:{click:e.addRow}},[e._v("\n        添加标签\n      ")])],1)],2),e._v(" "),e.addOrEditFormVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},i=[],s=a("1183"),r=a("569b"),o={props:["value","type"],components:{AddOrUpdate:r["default"]},data:function(){return{addOrEditFormVisible:!1,flags:[],flagList:[]}},watch:{flags:{handler:function(e){this.$emit("input",e)},deep:!0},value:{handler:function(e){this.flags=e||""},immediate:!0}},mounted:function(){this.getDataList()},methods:{getDataList:function(e){var t=this;Object(s["d"])(this.$store.getters.projectId,1).then((function(e){t.flagList=e||[]}))},addRow:function(){var e=this;this.addOrEditFormVisible=!0,this.$nextTick((function(){e.type?e.$refs.addOrUpdate.init(e.type):e.$refs.addOrUpdate.init(1)}))}}},l=o,c=(a("a691"),a("5511")),u=Object(c["a"])(l,n,i,!1,null,"69687c27",null);t["default"]=u.exports},"6ec6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.params,border:"","max-height":"200",size:"mini"}},[a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",disabled:!e.isAdd,clearable:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"===typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])},[a("template",{slot:"header"},[a("el-button",{staticClass:"el-icon-circle-plus",staticStyle:{padding:"4px 0px"},attrs:{type:"text",disabled:!e.isAdd,size:"mini"},on:{click:e.addParam}}),e._v("\n        方法参数名\n      ")],1)],2),e._v(" "),a("el-table-column",{attrs:{label:"值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value","string"===typeof a?a.trim():a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.row.description,callback:function(a){e.$set(t.row,"description","string"===typeof a?a.trim():a)},expression:"scope.row.description"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-delete",attrs:{type:"text",disabled:!e.isAdd,size:"mini"},on:{click:function(a){return e.deleteParam(t.$index)}}})]}}])})],1)],1)},i=[],s={props:{isAdd:Boolean},data:function(){return{params:[]}},methods:{addParam:function(){this.params.push({name:"",value:"",description:""})},deleteParam:function(e){this.params.splice(e,1)}}},r=s,o=a("5511"),l=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},"8e80":function(e,t,a){"use strict";var n=a("1a11"),i=a.n(n);i.a},a512:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"添加HTTP接口",visible:e.visible,"append-to-body":"",width:"70%"},on:{"update:visible":function(t){e.visible=t},open:function(t){return e.openDialog()},close:function(t){return e.closeDialog("addForm")}}},[a("el-card",{staticClass:"box-card card-my",attrs:{shadow:"never","body-style":"padding-top:0px;"}},[a("div",{staticClass:"my-class"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.serchData,"label-width":"90px","label-position":"right",size:"mini"}},[a("el-form-item",{attrs:{label:"用例名称："}},[a("el-input",{attrs:{placeholder:"请输入用例名称"},model:{value:e.serchData.name,callback:function(t){e.$set(e.serchData,"name",t)},expression:"serchData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用例描述："}},[a("el-input",{attrs:{placeholder:"请输入用例描述"},model:{value:e.serchData.remark,callback:function(t){e.$set(e.serchData,"remark",t)},expression:"serchData.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.searchList}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"title",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("addForm")}}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"auto"},attrs:{data:e.dataList,border:"",stripe:"",size:"small"},on:{"selection-change":e.selected}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"200",label:"接口名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"接口路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.path))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"170",label:"接口分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.suiteName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0===t.row.status?"未完成":"已完成")+"\n        ")]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.pageCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNum}})],1)],1)},i=[],s=(a("cc57"),a("6d57"),a("1c2e")),r=a("0cea"),o=a("3fa5"),l={props:["value","testcaseId"],data:function(){return{visible:!1,dataList:[],selectedData:[],apiSuiteList:[],serchData:{name:"",remark:"",caseType:1},pageInfo:{pageNum:1,pageSize:10,pageCount:0},loading:!1}},computed:{serchInfo:function(){var e=this.pageInfo,t=this.serchData;return t.projectId=this.$store.getters.projectId,e.serchData=t,e}},watch:{value:{handler:function(e){this.visible=e},immediate:!0},visible:function(e){this.$emit("input",e)}},mounted:function(){var e=this;Object(s["h"])(this.$store.getters.projectId).then((function(t){e.apiSuiteList=t||[]}))},methods:{selected:function(e){this.selectedData=e},submitForm:function(e){var t=this;if("addForm"===e&&0===this.selectedData.length)this.$message({showClose:!0,message:"请选择一个HTTP接口",type:"error"});else if("addForm"===e&&this.selectedData.length>0){var a=[];this.selectedData.forEach((function(e){var n={};n.api=e,n.name=e.name,n.type=1,n.testcaseId=t.testcaseId,n.sourceId=e.id,n.status=1,n.domain=e.domain||"",n.method=e.method||"GET",n.path=e.path||"",n.beforeExcs=e.beforeExcs,n.reqHeader=e.reqHeader,n.reqQuery=e.reqQuery,n.reqBodyData=e.reqBodyData,n.reqBodyJson=e.reqBodyJson,n.reqBodyType=e.reqBodyType,n.reqExtract=e.reqExtract,n.reqAssert=e.reqAssert,a.push(n)})),Object(r["a"])(a).then((function(e){t.visible=!1,t.$emit("callBack"),Object(o["a"])("保存数据成功")}))}},getPageList:function(){var e=this;this.loading=!0,Object(s["g"])(this.serchInfo).then((function(t){e.dataList=t.list.map((function(t,a){for(var n=0;n<e.apiSuiteList.length;n++)if(e.apiSuiteList[n].id===t.apiSuiteId){t.suiteName=e.apiSuiteList[n].name;break}return t})),e.pageInfo.pageCount=t.total,e.loading=!1}))},searchList:function(){this.getPageList()},changePageSize:function(e){this.pageInfo.pageSize=e,this.getPageList()},changePageNum:function(e){this.pageInfo.pageNum=e,this.getPageList()},closeDialog:function(e){this.visible=!1,this.$refs.table.clearSelection()},openDialog:function(){this.getPageList()}}},c=l,u=(a("8e80"),a("5511")),d=Object(u["a"])(c,n,i,!1,null,"30f92b5e",null);t["default"]=d.exports},a691:function(e,t,a){"use strict";var n=a("2fb8"),i=a.n(n);i.a},f810:function(e,t,a){"use strict";var n=a("244c"),i=a.n(n);i.a},f88d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card card-main",attrs:{shadow:"never","body-style":"padding-top:0px;"}},[a("el-form",{ref:"caseInfoForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.caseInfo,"label-width":"82px","label-position":"right",rules:e.formRules,size:"mini"}},[a("el-form-item",{attrs:{label:"用例名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入用例名称"},model:{value:e.caseInfo.name,callback:function(t){e.$set(e.caseInfo,"name",t)},expression:"caseInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"默认环境：",prop:"envId"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择默认接口环境"},model:{value:e.caseInfo.envId,callback:function(t){e.$set(e.caseInfo,"envId",t)},expression:"caseInfo.envId"}},[a("el-option",{attrs:{label:"默认环境",value:-1}}),e._v(" "),e._l(e.apiEnvList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"标签：",prop:"flagList"}},[a("FlagsSelect",{attrs:{type:1},model:{value:e.caseInfo.flagList,callback:function(t){e.$set(e.caseInfo,"flagList",t)},expression:"caseInfo.flagList"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{placeholder:"请输入业务备注"},model:{value:e.caseInfo.remark,callback:function(t){e.$set(e.caseInfo,"remark",t)},expression:"caseInfo.remark"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.caseInfo.id,expression:"caseInfo.id"}]},[a("el-tabs",{staticStyle:{margin:"20px 0px 30px 0px"},attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"用例参数"}},[a("action-case-var-list",{ref:"caseVars",attrs:{"is-add":!0}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"公共参数"}},[e._v("公共参数列表")]),e._v(" "),a("el-tab-pane",{attrs:{disabled:!e.caseInfo.id,label:"附件"}},[a("ActionFileList",{ref:"actionFileList"})],1)],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("\n        接口信息\n        "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.addApi}},[e._v("添加HTTP接口")])],1),e._v(" "),a("el-table",{ref:"dragTable",staticStyle:{width:"auto"},attrs:{data:e.caseInfo.testSteps,"row-key":"id",border:"",stripe:"",size:"small"}},[a("el-table-column",{attrs:{width:"200",align:"center",label:"步骤名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",label:"关联接口"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.api?t.row.api.name:"该接口已被删除"))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1===t.row.type?"HTTP接口":"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"300","show-overflow-tooltip":"",align:"center",label:"请求地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.domain+t.row.path+"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.status?"启用":"禁用"))]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mini-btn",attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"mini-btn",attrs:{size:"mini"},on:{click:function(e){1===t.row.status?t.row.status=0:t.row.status=1}}},[e._v(e._s(1===t.row.status?"禁用":"启用"))]),e._v(" "),a("el-button",{staticClass:"mini-btn",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("addApi",{attrs:{"testcase-id":e.caseInfo.id},on:{callBack:e.refreshSteps},model:{value:e.addApiVisible,callback:function(t){e.addApiVisible=t},expression:"addApiVisible"}})],1),e._v(" "),a("MyFoot",{attrs:{"z-index":2,"sticky-bottom":0,"class-name":"sub-navbar my-foot-api-edit"}},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{size:"small"},on:{click:e.toBack}},[e._v("返回")]),e._v(" "),a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.save("caseInfoForm")}}},[e._v("\n        "+e._s(e.$route.query.id?"保存(ctrl+s)":"保存并继续(ctrl+s)")+"\n      ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.id,expression:"$route.query.id"}],staticStyle:{"font-size":"14px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.save("caseInfoForm",1)}}},[e._v("\n        调试(ctrl+d)\n      ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.id,expression:"$route.query.id"}],staticStyle:{"font-size":"14px"},attrs:{type:"info",plain:"",size:"small"},on:{click:function(t){return e.save("caseInfoForm",2)}}},[e._v("复制(ctrl+shift+c)")])],1)])],1)},i=[],s=(a("63ff"),a("57f0")),r=(a("6d57"),a("9a33"),a("190b"),a("cc57"),a("4d33")),o=a("3fa5"),l=a("a512"),c=a("0cea"),u=a("1183"),d=a("6ec6"),f=a("ca2d"),p=a("59b5"),m=a("18c9"),h=a("2480"),b={components:{MyFoot:r["a"],ActionCaseVarList:d["default"],ActionFileList:f["default"],FlagsSelect:p["default"],addApi:l["default"]},data:function(){return{loading:!1,addApiVisible:!1,apiEnvList:[],flagList:[],formRules:{name:{type:"string",required:!0,message:"用例名称不能为空",trigger:"blur"},timoutTime:{required:!0,message:"超时时间不能为空",trigger:"blur"}},caseInfo:{title:"",id:"",name:"",envId:-1,beforeExcs:[],projectId:0,timoutTime:1,failContinue:"",flags:"",flagList:[],params:[],caseVars:[],caseType:1,testSteps:[],remark:""}}},destroyed:function(){window.onbeforeunload=null,document.onkeydown=null},mounted:function(){var e=this;this.initBefore(),Object(m["d"])(this.$store.getters.projectId).then((function(t){e.apiEnvList=t||[]})),Object(u["d"])(this.$store.getters.projectId,1).then((function(t){e.flagList=t||[]})),document.onkeydown=function(){var t=window.event;83===t.keyCode&&t.ctrlKey?(e.save("caseInfoForm"),t.preventDefault()):68===t.keyCode&&t.ctrlKey?(e.save("caseInfoForm",1),t.preventDefault()):67===t.keyCode&&t.ctrlKey&&t.shiftKey&&(e.save("caseInfoForm",2),t.preventDefault())}},methods:{initBefore:function(){var e=this;this.$route.query.id?(this.loading=!0,Object(c["g"])(this.$route.query.id).then((function(t){t&&t.projectId===e.$store.getters.projectId||e.toBack(),e.init(t)})).finally((function(){e.loading=!1}))):this.init()},init:function(e){var t=this;e?(this.caseInfo.id=e.id,this.caseInfo.name=e.name,this.caseInfo.envId=e.envId||-1,this.caseInfo.domain=e.domain||"",this.caseInfo.path=e.path||"",this.caseInfo.beforeExcs=e.beforeExcs||[],this.caseInfo.projectId=e.projectId,this.caseInfo.timoutTime=e.timoutTime,this.caseInfo.failContinue=e.failContinue,this.caseInfo.flags=e.flags,this.caseInfo.flagList=(e.flags||"").split(",").filter((function(e){return""!==e})),this.caseInfo.params=e.params||[],this.caseInfo.caseVars=e.caseVars||[],this.caseInfo.caseType=e.caseType,this.caseInfo.testSteps=e.testSteps||[],this.caseInfo.remark=e.remark,this.setSort(),this.$nextTick((function(){t.$refs.actionFileList.init(e.id,3),t.$refs.caseVars.params=t.caseInfo.caseVars}))):(this.caseInfo.projectId=this.$store.getters.projectId,this.caseInfo.envId=-1,this.caseInfo.caseType=1,this.caseInfo.failContinue=0,this.caseInfo.timoutTime=1)},debug:function(){this.$refs.debug.visible=!0},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该步骤, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["e"])(e).then((function(a){t.$message({type:"success",message:"删除成功!"}),1===e.type&&t.$emit("closeApi","引用api步骤-"+e.id),t.refreshSteps()}))})).catch((function(){t.$message({type:"success",message:"已取消删除"})}))},editRow:function(e){this.$emit("editApi",e)},toBack:function(){this.$router.push({path:"/apiTest/testCase/list"})},addApi:function(){this.addApiVisible=!0},refreshSteps:function(){var e=this;Object(c["f"])(this.caseInfo.id).then((function(t){e.caseInfo.testSteps=t||[]}))},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];h["a"].create(t,{setData:function(e){e.setData("Text","")},onStart:function(t){e.oldDataList=[],e.caseInfo.testSteps.forEach((function(t){e.oldDataList.push(t)}))},onEnd:function(t){var a=e.caseInfo.testSteps.splice(t.oldIndex,1)[0];e.caseInfo.testSteps.splice(t.newIndex,0,a)}})},save:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=!0,e.next=3,this.$refs["caseInfoForm"].validate((function(e,t){!e&n&&(n=e)}));case 3:return e.next=5,this.$refs.caseVars.params.every((function(e,t){return!!e.name||(s.$message.error("第"+(t+1)+"行用例参数名不能为空"),n=!1,!1)}));case 5:return i=e.sent,i&&(this.caseInfo.caseVars=this.$refs.caseVars.params||[]),e.next=9,this.$refs[t].validate((function(e,t){e&n&&(s.caseInfo.flags=s.caseInfo.flagList.join(","),s.loading=!0,1===a?Object(c["c"])(s.caseInfo).then((function(e){s.loading=!1,s.$emit("debug",e||{}),setTimeout((function(){Object(o["a"])("调试成功")}),10)})):s.$route.query.id&&2!==a?Object(c["i"])(s.caseInfo).then((function(e){s.initBefore(),Object(o["a"])("保存用例成功！")})).catch((function(){s.loading=!1})):Object(c["b"])(s.caseInfo).then((function(e){s.$router.push({path:"/apiTest/testCase/edit",query:{id:e.id}}),2===a?Object(o["a"])("恭喜你！复制用例成功！"):Object(o["a"])("保存用例成功！")})))}));case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}},v=b,g=(a("f810"),a("5511")),y=Object(g["a"])(v,n,i,!1,null,"5d65d774",null);t["default"]=y.exports}}]);