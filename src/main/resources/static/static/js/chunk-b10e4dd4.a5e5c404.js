(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b10e4dd4"],{"11ed":function(e,t,a){},"45d8":function(e,t,a){"use strict";var i=a("11ed"),n=a.n(i);n.a},"92cb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card card-main",attrs:{shadow:"never","body-style":"padding-top:0px;"}},[a("el-tabs",{attrs:{lazy:""},on:{"tab-remove":e.removeTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"接口列表",name:"apiList"}},[a("apiList",{ref:"apiList",on:{openApi:e.openApi,delApi:e.delApi}})],1),e._v(" "),e._l(e.apiTabs,(function(t){return a("el-tab-pane",{key:t.key,attrs:{closable:"",label:t.name,name:t.key}},[a("editApi",{on:{addRefreshApiList:e.addRefreshApiList,editRefreshApiList:e.editRefreshApiList},model:{value:t.data,callback:function(a){e.$set(t,"data",a)},expression:"item.data"}})],1)}))],2)],1)},n=[],s=(a("cc57"),a("db24")),r=a("960a"),o={components:{editApi:s["default"],apiList:r["default"]},data:function(){return{activeName:"apiList",apiTabs:[]}},computed:{},mounted:function(){},methods:{delApi:function(e){this.removeTab("编辑api-"+e.id)},editRefreshApiList:function(e){for(var t=0;t<this.apiTabs.length;t++){var a=this.apiTabs[t];if(a.key==="编辑api-"+e.id){a.key="编辑api-"+e.id,a.name="接口:"+e.name,this.activeName=a.key;break}}this.$refs.apiList.searchList()},addRefreshApiList:function(e){for(var t=0;t<this.apiTabs.length;t++){var a=this.apiTabs[t];if("新增api"===a.key){a.key="编辑api-"+e.id,a.name="接口:"+e.name,a.data=e,this.activeName=a.key;break}}this.$refs.apiList.searchList()},openApi:function(e){var t={};e?(e=JSON.parse(JSON.stringify(e||{})),t={key:"编辑api-"+e.id,name:"接口:"+e.name,data:e}):(e={id:"",name:"",labels:"",projectId:this.$store.getters.projectId,apiSuiteId:"",method:"GET",envId:-1,domain:"",path:"/",type:1,beforeExcs:[],reqHeader:[],reqQuery:[],reqBodyData:[],remark:"",status:0},t={key:"新增api",name:"新建接口",data:e});for(var a=!1,i=0;i<this.apiTabs.length;i++){var n=this.apiTabs[i];if(n.key===t.key&n.name===t.name){a=!0;break}}a||("新增api"===t.key?this.apiTabs.splice(0,0,t):this.apiTabs.push(t)),this.activeName=t.key},removeTab:function(e){this.activeName===e&&(this.activeName="apiList"),this.apiTabs=this.apiTabs.filter((function(t){return t.key!==e}))}}},c=o,l=a("5511"),p=Object(l["a"])(c,i,n,!1,null,"4b5166c0",null);t["default"]=p.exports},"960a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card card-main",staticStyle:{"margin-top":"-16px"},attrs:{shadow:"never"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.serchData,"label-width":"90px","label-position":"right",size:"mini"}},[a("el-form-item",{attrs:{label:"接口名称："}},[a("el-input",{attrs:{placeholder:"请输入接口名称"},model:{value:e.serchData.name,callback:function(t){e.$set(e.serchData,"name",t)},expression:"serchData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口描述："}},[a("el-input",{attrs:{placeholder:"请输入接口描述"},model:{value:e.serchData.remark,callback:function(t){e.$set(e.serchData,"remark",t)},expression:"serchData.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类："}},[a("ApiSuiltSelect",{ref:"apiSuiltSelect",model:{value:e.serchData.apiSuiteId,callback:function(t){e.$set(e.serchData,"apiSuiteId",t)},expression:"serchData.apiSuiteId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.addRow()}}},[e._v("新增接口")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dragTable",staticStyle:{width:"auto"},attrs:{"row-key":"suiteCaseId",data:e.dataList,border:"",stripe:"",size:"small"}},[a("el-table-column",{attrs:{align:"center",width:"200",label:"接口名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"接口路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.path?t.row.path.split("?")[0]:t.row.path))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"170",label:"接口分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.suiteName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.status?"未完成":"已完成")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mini-btn",attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"mini-btn",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.pageCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNum}})],1)},n=[],s=(a("cc57"),a("1c2e")),r=a("93a4"),o={components:{ApiSuiltSelect:r["default"]},data:function(){return{loading:!1,serchData:{name:"",apiSuiteId:""},pageInfo:{pageNum:1,pageSize:10,pageCount:0},dataList:[],apiSuiteList:[]}},computed:{serchInfo:function(){var e=this.pageInfo,t=this.serchData;return t.projectId=this.$store.getters.projectId,e.serchData=t,e}},mounted:function(){this.getPageList()},methods:{addRow:function(){this.$emit("openApi")},editRow:function(e){this.$emit("openApi",e)},resetSearch:function(){this.serchData={name:"",apiSuiteId:""}},searchList:function(){this.getPageList()},changePageSize:function(e){this.pageInfo.pageSize=e,this.getPageList()},changePageNum:function(e){this.pageInfo.pageNum=e,this.getPageList()},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])(e).then((function(a){t.$message({type:"success",message:"删除成功!"}),t.$emit("delApi",e),t.getPageList()}))})).catch((function(){t.$message({type:"success",message:"已取消删除"})}))},getPageList:function(){var e=this;this.loading=!0,Object(s["g"])(this.serchInfo).then((function(t){e.apiSuiteList=e.$refs.apiSuiltSelect.apiSuiteList||[],e.dataList=t.list.map((function(t,a){for(var i=0;i<e.apiSuiteList.length;i++)if(e.apiSuiteList[i].id===t.apiSuiteId){t.suiteName=e.apiSuiteList[i].name;break}return t})),e.pageInfo.pageCount=t.total,e.loading=!1}))}}},c=o,l=(a("45d8"),a("5511")),p=Object(l["a"])(c,i,n,!1,null,"776277a7",null);t["default"]=p.exports}}]);