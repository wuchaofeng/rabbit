(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4501fb4","chunk-7f480460","chunk-ac7f1f22","chunk-7d1347f4"],{"117a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"titil"},[i("el-col",{attrs:{span:24}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.getPageList()}}},[e._v("刷新数据")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addRow()}}},[e._v("新增接口")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dragTable",staticStyle:{width:"auto"},attrs:{"row-key":"suiteCaseId",data:e.dataList,border:"",stripe:"",size:"small"}},[i("el-table-column",{attrs:{align:"center",label:"接口名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"接口路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.path))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"接口分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(0===t.row.status?"未完成":"已完成")+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"mini-btn",attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{background:"","current-page":e.pageInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.pageCount},on:{"size-change":e.changePageSize,"current-change":e.changePageNum}}),e._v(" "),i("apiAdd",{ref:"apiAdd",on:{refreshData:e.getPageList},model:{value:e.addFormVisible,callback:function(t){e.addFormVisible=t},expression:"addFormVisible"}})],1)},a=[],n=i("1c2e"),s=i("c1c4"),o={components:{apiAdd:s["default"]},data:function(){return{visible:!1,loading:!1,serchData:{apiSuiteId:""},pageInfo:{pageNum:1,pageSize:10,pageCount:0},dataList:[],addFormVisible:!1}},computed:{serchInfo:function(){var e=this.pageInfo,t=this.serchData;return t.projectId=this.$store.getters.projectId,e.serchData=t,e}},mounted:function(){},methods:{init:function(e){this.serchData.apiSuiteId=e||"",this.getPageList()},addRow:function(){this.$refs.apiAdd.init(),this.addFormVisible=!0},resetSearch:function(){this.serchData={name:""}},searchList:function(){this.getPageList()},changePageSize:function(e){this.pageInfo.pageSize=e,this.getPageList()},changePageNum:function(e){this.pageInfo.pageNum=e,this.getPageList()},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n["c"])(e).then(function(i){t.$message({type:"success",message:"删除成功!"}),t.$emit("refreshDataList",{rowKey:e.apiSuiteId+"",id:e.apiSuiteId,type:1})})}).catch(function(){t.$message({type:"success",message:"已取消删除"})})},getPageList:function(){var e=this;this.loading=!0,Object(n["e"])(this.serchInfo).then(function(t){e.dataList=t.list||[],e.pageInfo.pageCount=t.total,e.loading=!1})}}},l=o,d=(i("c30d"),i("6691")),c=Object(d["a"])(l,r,a,!1,null,"5738ae2e",null);t["default"]=c.exports},"1c2e":function(e,t,i){"use strict";i.d(t,"e",function(){return a}),i.d(t,"g",function(){return n}),i.d(t,"f",function(){return s}),i.d(t,"a",function(){return o}),i.d(t,"b",function(){return l}),i.d(t,"h",function(){return d}),i.d(t,"c",function(){return c}),i.d(t,"d",function(){return u});var r=i("b775"),a=function(e){return Object(r["d"])("/api/listPage",e,!1)},n=function(e){return Object(r["d"])("/api/listTreeByProjectId/"+e)},s=function(e){return Object(r["d"])("/api/listSuiteByProjectId/"+e)},o=function(e){return Object(r["e"])("/api/add",e)},l=function(e){return Object(r["e"])("/api/addSuite",e)},d=function(e){return Object(r["f"])("/api/editSuite",e)},c=function(e){return Object(r["e"])("/api/remove",e)},u=function(e){return Object(r["e"])("/api/removeSuite",e)}},"1c76":function(e,t,i){"use strict";var r=i("9f7a"),a=i.n(r);a.a},5879:function(e,t,i){},"955a":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.addOrEditForm.title,visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog("addOrEditForm")}}},[i("el-form",{ref:"addOrEditForm",attrs:{"label-width":"90px",model:e.addOrEditForm,size:"small",rules:e.rules}},[i("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入分类名称"},model:{value:e.addOrEditForm.name,callback:function(t){e.$set(e.addOrEditForm,"name",t)},expression:"addOrEditForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.addOrEditForm.remark,callback:function(t){e.$set(e.addOrEditForm,"remark",t)},expression:"addOrEditForm.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("addOrEditForm")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addOrEditForm")}}},[e._v("保存")])],1)],1)},a=[],n=(i("7364"),i("1c2e")),s=i("3fa5"),o={data:function(){return{visible:!1,projectPages:[],rules:{elementName:[{required:!0,message:"分类名称不能为空",trigger:"blur"}]},addOrEditForm:{title:"",id:"",name:"",projectId:"",remark:""}}},methods:{init:function(e){e?(this.visible=!0,this.addOrEditForm.title="编辑分类",this.addOrEditForm.id=e.id,this.addOrEditForm.name=e.name,this.addOrEditForm.projectId=this.$store.getters.projectId,this.addOrEditForm.remark=e.remark):(this.visible=!0,this.addOrEditForm.projectId=this.$store.getters.projectId,this.addOrEditForm.title="新增分类")},closeDialog:function(){this.$refs["addOrEditForm"].resetFields(),this.visible=!1,this.addOrEditForm={title:"",id:"",name:"",projectId:"",remark:""}},submitForm:function(e){var t=this;this.$refs[e].validate(function(i){i&&"addOrEditForm"===e&&t.addOrEditForm.id?Object(n["h"])(t.addOrEditForm).then(function(e){t.visible=!1,t.$emit("refreshDataList"),Object(s["a"])("保存数据成功")}):i&&"addOrEditForm"===e&&!t.addOrEditForm.id&&Object(n["b"])(t.addOrEditForm).then(function(e){t.visible=!1,t.$emit("refreshDataList"),Object(s["a"])("保存数据成功")})})}}},l=o,d=i("6691"),c=Object(d["a"])(l,r,a,!1,null,null,null);t["default"]=c.exports},"9f7a":function(e,t,i){},c1c4:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.addOrEditForm.title,visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:function(t){return e.closeDialog("addOrEditForm")}}},[i("el-form",{ref:"addOrEditForm",attrs:{"label-width":"90px",model:e.addOrEditForm,size:"small",rules:e.rules}},[i("el-form-item",{attrs:{label:"接口分类",prop:"apiSuiteId"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",placeholder:"请选择分类名称"},model:{value:e.addOrEditForm.apiSuiteId,callback:function(t){e.$set(e.addOrEditForm,"apiSuiteId",t)},expression:"addOrEditForm.apiSuiteId"}},e._l(e.apiSuiteList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入分类名称"},model:{value:e.addOrEditForm.name,callback:function(t){e.$set(e.addOrEditForm,"name",t)},expression:"addOrEditForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"接口路径",prop:"path"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入分类名称"},model:{value:e.addOrEditForm.path,callback:function(t){e.$set(e.addOrEditForm,"path",t)},expression:"addOrEditForm.path"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closeDialog("addOrEditForm")}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"title",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("addOrEditForm")}}},[e._v("保存")])],1)],1)},a=[],n=i("1c2e"),s=i("3fa5"),o={data:function(){return{visible:!1,apiSuiteList:[],rules:{elementName:[{required:!0,message:"分类名称不能为空",trigger:"blur"}]},addOrEditForm:{title:"",id:"",name:"",projectId:"",apiSuiteId:"",method:"GET",path:"",remark:""}}},methods:{init:function(){var e=this;Object(n["f"])(this.$store.getters.projectId).then(function(t){e.apiSuiteList=t||[]}),this.visible=!0,this.addOrEditForm.projectId=this.$store.getters.projectId,this.addOrEditForm.title="新增接口"},closeDialog:function(){this.$refs["addOrEditForm"].resetFields(),this.visible=!1,this.addOrEditForm={title:"",id:"",name:"",projectId:"",apiSuiteId:"",method:"GET",path:"",remark:""}},submitForm:function(e){var t=this;this.$refs[e].validate(function(i){i&&"addOrEditForm"===e&&Object(n["a"])(t.addOrEditForm).then(function(e){t.visible=!1,t.$emit("refreshDataList"),Object(s["a"])("保存数据成功")})})}}},l=o,d=i("6691"),c=Object(d["a"])(l,r,a,!1,null,null,null);t["default"]=c.exports},c30d:function(e,t,i){"use strict";var r=i("5879"),a=i.n(r);a.a},ccd5:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"dect-main",attrs:{gutter:10}},[i("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"500px",background:"#FFF"},attrs:{span:6}},[i("el-row",{staticClass:"titil"},[i("el-col",{attrs:{span:24}},[i("el-input",{staticStyle:{width:"70%"},attrs:{size:"small",placeholder:"请输入接口名称"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-button",{staticStyle:{width:"25%"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addRow()}}},[e._v("添加分类")])],1)],1),e._v(" "),i("el-tree",{ref:"tree",staticClass:"api-suite-list",attrs:{"node-key":"rowKey",data:e.dataList,accordion:"",props:e.defaultProps,"highlight-current":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.selectRow},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node",on:{mouseenter:function(t){return e.show(a)},mouseleave:function(t){return e.show(a)}}},[0===a.type?i("span",{staticClass:"el-icon-folder"},[e._v(e._s(" "+r.label))]):e._e(),e._v(" "),1===a.type?i("span",{staticClass:"el-icon-folder-opened"},[e._v(e._s(" "+r.label))]):e._e(),e._v(" "),0!==a.type&&1!==a.type?i("span",[e._v(e._s(" "+r.label))]):e._e(),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"data.show"}]},[1===a.type?i("el-button",{staticClass:"el-icon-plus",attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.append(a)}}}):e._e(),e._v(" "),1===a.type?i("el-button",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"5px"},attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.addRow(a)}}}):e._e(),e._v(" "),0!==a.type?i("el-button",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"5px"},attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.deleteRow(r,a)}}}):e._e()],1)])}}])})],1),e._v(" "),i("el-col",{attrs:{span:18}},[i("apiList",{directives:[{name:"show",rawName:"v-show",value:2!==e.selectedType,expression:"selectedType !== 2"}],ref:"apiList",on:{refreshDataList:e.freshTree}})],1),e._v(" "),i("apiSuiteAddOrEdit",{ref:"apiSuiteAddOrEdit",on:{refreshDataList:e.getSuiteTreeList}})],1)},a=[],n=(i("f763"),i("7364"),i("63ff"),i("e71e")),s=i("1c2e"),o=i("117a"),l=i("955a"),d={components:{apiList:o["default"],apiSuiteAddOrEdit:l["default"]},data:function(){return{loading:!1,serchData:{name:""},dataList:[],selectedType:0,selectedKey:"0",rules:{key:[{required:!0,message:"key不能为空",trigger:"blur"}],name:[{required:!0,message:"name不能为空",trigger:"blur"}]},filterText:"",defaultProps:{children:"children",label:"name"}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSuiteTreeList();case 2:this.selectRow();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{show:function(e){e.show=!e.show},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},addRow:function(e){var t=this;this.$nextTick(function(){t.$refs.apiSuiteAddOrEdit.init(e)})},selectRow:function(e){e?(this.$refs.tree.setCurrentKey(e.rowKey),console.log(e),this.selectedType=e.type,this.selectedKey=e.rowKey,0===this.selectedType?this.$refs.apiList.init():1===this.selectedType?(console.log("我预期"),this.$refs.apiList.init(e.id)):console.log("进入api详情页")):(this.selectedKey="0",this.$refs.tree.setCurrentKey("0"),this.$refs.apiList.init())},freshTree:function(e){this.getSuiteTreeList(),this.selectRow(e)},deleteRow:function(e,t){var i=this;1===t.type?this.$confirm("该操作会删除该分类下所有接口，接口删除后无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s["d"])(t).then(function(e){i.selectedKey===t.rowKey?i.selectRow():i.selectRow(i.$refs.tree.getCurrentNode()),i.$message({type:"success",message:"删除成功!"}),i.getSuiteTreeList()})}).catch(function(){i.$message({type:"success",message:"已取消删除"})}):this.$confirm("接口删除后，无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s["c"])(t).then(function(e){i.selectedKey===t.rowKey?i.selectRow():i.selectRow(i.$refs.tree.getCurrentNode()),i.$message({type:"success",message:"删除成功!"}),i.getSuiteTreeList()})}).catch(function(){i.$message({type:"success",message:"已取消删除"})})},getSuiteTreeList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.dataList=[],e.next=4,Object(s["g"])(this.$store.getters.projectId).then(function(e){t.dataList.push({rowKey:"0",id:0,name:"全部接口",show:!1,type:0}),e.forEach(function(e){var i=[];e.apiList&&e.apiList.forEach(function(t){i.push({rowKey:e.id+"-"+t.id,id:t.id,name:t.name,show:!1,type:2})}),t.dataList.push({rowKey:e.id+"",id:e.id,name:e.name,projectId:e.projectId,remark:e.remark,show:!1,type:1,children:i})}),t.loading=!1});case 4:this.$nextTick(function(){t.$refs.tree.setCurrentKey(t.selectedKey)});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},c=d,u=(i("1c76"),i("6691")),f=Object(u["a"])(c,r,a,!1,null,"b8549a06",null);t["default"]=f.exports}}]);